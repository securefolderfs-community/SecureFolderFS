<Page
    x:Class="SecureFolderFS.Uno.Views.VaultWizard.MainWizardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:l="using:SecureFolderFS.Uno.Localization"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tuc="using:CommunityToolkit.WinUI.Controls"
    xmlns:uc="using:SecureFolderFS.Uno.UserControls"
    xmlns:vm="using:SecureFolderFS.Sdk.ViewModels.Views.Wizard"
    Width="464"
    mc:Ignorable="d">

    <Page.Resources>
        <DataTemplate x:Key="PickerSourceTemplate" x:DataType="vm:PickerSourceWizardViewModel">
            <StackPanel Spacing="4">
                <InfoBar
                    IsClosable="False"
                    IsOpen="True"
                    Message="{x:Bind Message, Mode=OneWay}"
                    Severity="{x:Bind Severity, Mode=OneWay, Converter={StaticResource GenericEnumConverter}}" />
                <uc:VaultFolderSelectionControl Message="{x:Bind SelectedLocation, Mode=OneWay}" OpenCommand="{x:Bind SelectLocationCommand, Mode=OneWay}" />
            </StackPanel>
        </DataTemplate>
    </Page.Resources>

    <StackPanel Spacing="16">
        <tuc:Segmented
            x:Name="SegmentedControl"
            HorizontalAlignment="Center"
            SelectedIndex="0"
            SelectionChanged="SegmentedControl_SelectionChanged">
            <tuc:SegmentedItem Content="{l:ResourceString Rid=AddExisting}" Tag="EXISTING" />
            <tuc:SegmentedItem Content="{l:ResourceString Rid=CreateNew}" Tag="CREATE" />
        </tuc:Segmented>

        <ContentControl
            HorizontalContentAlignment="Stretch"
            Content="{x:Bind CurrentViewModel, Mode=OneWay}"
            ContentTemplate="{StaticResource PickerSourceTemplate}">
            <ContentControl.ContentTransitions>
                <TransitionCollection>
                    <PopupThemeTransition />
                </TransitionCollection>
            </ContentControl.ContentTransitions>
        </ContentControl>
    </StackPanel>
</Page>
