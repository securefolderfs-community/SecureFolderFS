<ContentView
    x:Class="SecureFolderFS.Maui.UserControls.Browser.TransferControl"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:SecureFolderFS.Maui.UserControls.Browser"
    x:Name="ThisControl">

    <Grid
        x:Name="RootPanel"
        Margin="0,0,0,32"
        IsVisible="False">
        <Grid.Shadow>
            <Shadow
                Brush="{StaticResource CardFillPrimaryDarkColor}"
                Opacity="0.4"
                Radius="5" />
        </Grid.Shadow>

        <Border
            Margin="16"
            Padding="16,8,8,8"
            x:DataType="local:TransferControl"
            Background="{StaticResource ThemeCardFillPrimaryColorBrush}"
            BindingContext="{x:Reference ThisControl}"
            HeightRequest="56">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="12" />
            </Border.StrokeShape>
            <Border.GestureRecognizers>
                <PanGestureRecognizer PanUpdated="OnPanUpdated" />
            </Border.GestureRecognizers>

            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <HorizontalStackLayout Grid.Column="0" Spacing="8">
                    <ActivityIndicator
                        HeightRequest="32"
                        IsRunning="{Binding IsProgressing, Mode=OneWay}"
                        IsVisible="{Binding IsProgressing, Mode=OneWay}"
                        VerticalOptions="Center"
                        WidthRequest="32" />
                    <Label
                        FontSize="16"
                        Text="{Binding Title, Mode=OneWay}"
                        VerticalOptions="Center" />
                </HorizontalStackLayout>

                <Button
                    Grid.Column="1"
                    Padding="16,8"
                    Command="{Binding PrimaryCommand, Mode=OneWay}"
                    IsVisible="{Binding IsProgressing, Mode=OneWay, Converter={StaticResource BoolInvertConverter}}"
                    Style="{StaticResource AccentButtonStyle}"
                    Text="{Binding PrimaryButtonText, Mode=OneWay}" />
            </Grid>
        </Border>
    </Grid>
</ContentView>
