<ContentView
    x:Class="SecureFolderFS.Maui.UserControls.VaultLocatorControl"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:l="clr-namespace:SecureFolderFS.Maui.Localization"
    xmlns:mi="http://www.aathifmahir.com/dotnet/2022/maui/icons"
    xmlns:mi_cupertino="clr-namespace:MauiIcons.Cupertino;assembly=MauiIcons.Cupertino"
    xmlns:mi_material="clr-namespace:MauiIcons.Material;assembly=MauiIcons.Material"
    x:Name="ThisControl">

    <Grid>
        <!--  Not connected state  -->
        <VerticalStackLayout IsVisible="{Binding IsConnected, Mode=OneWay, Source={x:Reference ThisControl}, Converter={StaticResource BoolInvertConverter}}" Spacing="8">

            <!--  Info card  -->
            <Border
                Padding="20,18"
                Background="{StaticResource ThemeSecondaryColorBrush}"
                StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="14" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="12">
                    <Border
                        Background="{StaticResource ThemeElevatedFillPrimaryColorBrush}"
                        HeightRequest="48"
                        HorizontalOptions="Center"
                        StrokeThickness="0"
                        WidthRequest="48">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12" />
                        </Border.StrokeShape>
                        <Grid>
                            <mi:MauiIcon
                                HorizontalOptions="Center"
                                Icon="{mi_cupertino:Cupertino Wifi}"
                                IconColor="{AppThemeBinding Light={StaticResource PrimaryLightColor},
                                                            Dark={StaticResource PrimaryDarkColor}}"
                                IconSize="22"
                                OnPlatforms="iOS"
                                VerticalOptions="Center" />
                            <mi:MauiIcon
                                HorizontalOptions="Center"
                                Icon="{mi_material:Material Wifi}"
                                IconColor="{AppThemeBinding Light={StaticResource PrimaryLightColor},
                                                            Dark={StaticResource PrimaryDarkColor}}"
                                IconSize="22"
                                OnPlatforms="Android"
                                VerticalOptions="Center" />
                        </Grid>
                    </Border>
                    <Label
                        FontSize="14"
                        HorizontalOptions="Center"
                        HorizontalTextAlignment="Center"
                        LineBreakMode="WordWrap"
                        Opacity="0.6"
                        Text="Before logging in, establish a connection to the remote vault." />
                </VerticalStackLayout>
            </Border>

            <!--  Connect / Cancel  -->
            <VerticalStackLayout Margin="0,8,0,0" Spacing="8">
                <ActivityIndicator
                    HorizontalOptions="Center"
                    IsRunning="{Binding IsRunning, Mode=OneWay, Source={x:Reference ThisControl}}"
                    IsVisible="{Binding IsRunning, Mode=OneWay, Source={x:Reference ThisControl}}" />
                <Grid>
                    <Button
                        Command="{Binding ConnectCommand, Mode=OneWay, Source={x:Reference ThisControl}}"
                        HorizontalOptions="Fill"
                        IsVisible="{Binding IsRunning, Mode=OneWay, Source={x:Reference ThisControl}, Converter={StaticResource BoolInvertConverter}}"
                        Style="{StaticResource AccentButtonStyle}"
                        Text="{l:ResourceString Rid=Connect}" />
                    <Button
                        Command="{Binding CancelConnectionCommand, Mode=OneWay, Source={x:Reference ThisControl}}"
                        HorizontalOptions="{OnPlatform Android={LayoutOptions Alignment=Fill},
                                                       iOS={LayoutOptions Alignment=Center}}"
                        IsEnabled="{Binding CancelConnectionCommand, Mode=OneWay, Source={x:Reference ThisControl}, Converter={StaticResource NullToBoolConverter}}"
                        IsVisible="{Binding IsRunning, Mode=OneWay, Source={x:Reference ThisControl}}"
                        Style="{OnPlatform Android={StaticResource TransparentButtonStyle},
                                           iOS={StaticResource NoBackgroundButtonStyle}}"
                        Text="{l:ResourceString Rid=Cancel}" />
                </Grid>
            </VerticalStackLayout>
        </VerticalStackLayout>

        <!--  Connected / Login view  -->
        <ContentView
            Content="{Binding LoginView, Mode=OneWay, Source={x:Reference ThisControl}}"
            HorizontalOptions="Fill"
            IsVisible="{Binding IsConnected, Mode=OneWay, Source={x:Reference ThisControl}}"
            VerticalOptions="Fill" />
    </Grid>
</ContentView>
