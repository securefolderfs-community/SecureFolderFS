<md:BaseModalPage
    x:Class="SecureFolderFS.Maui.Views.Modals.Wizard.PickerSourceWizardPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:l="clr-namespace:SecureFolderFS.Maui.Localization"
    xmlns:local="clr-namespace:SecureFolderFS.Maui.Views.Modals.Wizard"
    xmlns:md="clr-namespace:SecureFolderFS.Maui.Views.Modals"
    xmlns:mi="http://www.aathifmahir.com/dotnet/2022/maui/icons"
    xmlns:mi_cupertino="clr-namespace:MauiIcons.Cupertino;assembly=MauiIcons.Cupertino"
    xmlns:mi_material="clr-namespace:MauiIcons.Material;assembly=MauiIcons.Material"
    Title="{Binding ViewModel.Title, Mode=OneWay}"
    x:DataType="local:PickerSourceWizardPage"
    CloseCommand="{Binding OverlayViewModel.CancellationCommand, Mode=OneWay}"
    CloseEnabled="{Binding OverlayViewModel.CanCancel, Mode=OneWay}"
    CloseText="{Binding OverlayViewModel.SecondaryText, Mode=OneWay}"
    PrimaryCommand="{Binding OverlayViewModel.ContinuationCommand, Mode=OneWay}"
    PrimaryEnabled="{Binding OverlayViewModel.CanContinue, Mode=OneWay}"
    PrimaryText="{Binding OverlayViewModel.PrimaryText, Mode=OneWay}">

    <md:BaseModalPage.ModalContent>
        <VerticalStackLayout
            Margin="{OnPlatform iOS='0,16,0,0'}"
            Padding="16,0"
            Spacing="24">

            <Label
                FontSize="15"
                Opacity="0.55"
                Text="{l:ResourceString Rid=SelectLocationOfVault}" />

            <!--  Location picker row  -->
            <Border
                BackgroundColor="{AppThemeBinding Light={StaticResource SecondaryLightColor},
                                                  Dark={StaticResource SecondaryDarkColor}}"
                HeightRequest="64"
                StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="14" />
                </Border.StrokeShape>
                <Grid
                    Padding="18,0"
                    ColumnDefinitions="*,Auto"
                    ColumnSpacing="12">
                    <Label
                        Grid.Column="0"
                        FontSize="15"
                        LineBreakMode="TailTruncation"
                        Opacity="{Binding ViewModel.SelectedLocation, Mode=OneWay, Converter={StaticResource NullToOpacityConverter}}"
                        Text="{Binding ViewModel.SelectedLocation, Mode=OneWay, TargetNullValue='No location selected'}"
                        VerticalOptions="Center" />
                    <Border
                        Grid.Column="1"
                        Background="{StaticResource ThemePrimaryColorBrush}}"
                        HeightRequest="36"
                        StrokeThickness="0"
                        VerticalOptions="Center"
                        WidthRequest="36">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="9" />
                        </Border.StrokeShape>
                        <Grid>
                            <mi:MauiIcon
                                HorizontalOptions="Center"
                                Icon="{mi_material:Material Folder}"
                                IconColor="White"
                                IconSize="18"
                                OnPlatforms="Android"
                                VerticalOptions="Center" />
                            <mi:MauiIcon
                                HorizontalOptions="Center"
                                Icon="{mi_cupertino:Cupertino Folder}"
                                IconColor="White"
                                IconSize="18"
                                OnPlatforms="iOS"
                                VerticalOptions="Center" />
                        </Grid>
                    </Border>
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding ViewModel.SelectLocationCommand, Mode=OneWay}" />
                    </Grid.GestureRecognizers>
                </Grid>
            </Border>

            <!--  Helper message  -->
            <Label
                FontSize="13"
                HorizontalOptions="Center"
                HorizontalTextAlignment="Center"
                Opacity="0.5"
                Text="{Binding ViewModel.Message, Mode=OneWay}" />
        </VerticalStackLayout>
    </md:BaseModalPage.ModalContent>
</md:BaseModalPage>
